// script.js (–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è")

document.addEventListener('DOMContentLoaded', () => {

    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω –≤–Ω—É—Ç—Ä–∏ Telegram
    if (typeof window.Telegram === 'undefined' || !window.Telegram.WebApp) {
        console.error("–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ Telegram.");
        document.body.innerHTML = `<div style="text-align:center; padding: 40px; font-family: sans-serif;"><h1>–û—à–∏–±–∫–∞</h1><p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Telegram.</p></div>`;
        return;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // --- –í–ê–®–ê –ü–ê–†–¢–ù–ï–†–°–ö–ê–Ø –°–°–´–õ–ö–ê ---
    const PARTNER_LINK = "https://myblogshop.top/r/oKdUJPWx/s";

    // --- –ü–û–ò–°–ö –≠–õ–ï–ú–ï–ù–¢–û–í DOM ---
    const screens = {
        start: document.getElementById('start-screen'),
        quiz: document.getElementById('quiz-screen'),
        loading: document.getElementById('loading-screen'),
        report: document.getElementById('report-screen')
    };
    const startBtn = document.getElementById('start-btn');
    const buyBtn = document.getElementById('buy-btn');
    const shareBtn = document.getElementById('share-btn'); // <-- –ù–∞—Ö–æ–¥–∏–º –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É
    const questionTextEl = document.getElementById('question-text');
    const answersContainerEl = document.getElementById('answers-container');
    const progressInnerEl = document.getElementById('progress-inner');
    const loadingTextEl = document.getElementById('loading-text');
    
    const userData = {};
    let currentQuestionIndex = 0;
    
    const questions = [
        { key: 'main_goal', text: "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è —Å–∞–º–æ–µ –∂–µ–ª–∞–Ω–Ω–æ–µ –≤ –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ç–µ–ª–∞?", answers: ["–£–≤–∏–¥–µ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–∏—Ñ—Ä—É –Ω–∞ –≤–µ—Å–∞—Ö", "–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª–µ–≥–∫–æ–π –∏ –ø–æ–ª–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏", "–° —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –Ω–æ—Å–∏—Ç—å –ª—é–±—É—é –æ–¥–µ–∂–¥—É", "–£–ª—É—á—à–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ"] },
        { key: 'eating_trigger', text: "–ß—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–±—è –ø–µ—Ä–µ–µ–¥–∞—Ç—å –∏–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–¥–Ω–æ–µ?", answers: ["–ù–∞—Å—Ç–æ—è—â–∏–π –≥–æ–ª–æ–¥", "–°—Ç—Ä–µ—Å—Å –∏–ª–∏ —Å–∫—É–∫–∞", "–ó–∞ –∫–æ–º–ø–∞–Ω–∏—é —Å –¥—Ä—É–≥–∏–º–∏", "–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞, '–ø–æ–¥ —Å–µ—Ä–∏–∞–ª'"] },
        { key: 'activity_type', text: "–ö–∞–∫–æ–π —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–µ–±–µ –∫–∞–∂–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–∏–µ–º–ª–µ–º—ã–º?", answers: ["–°–ø–æ–∫–æ–π–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏ –∏–ª–∏ –π–æ–≥–∞", "–ö–æ—Ä–æ—Ç–∫–∏–µ, –Ω–æ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", "–¢–∞–Ω—Ü—ã –∏–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã", "–ú–Ω–µ —Å–ª–æ–∂–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –¥–≤–∏–≥–∞—Ç—å—Å—è"] },
        { key: 'sleep_quality', text: "–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å —É—Ç—Ä–æ–º –ø–æ—Å–ª–µ —Å–Ω–∞?", answers: ["–û—Ç–ª–∏—á–Ω–æ, —è –ø–æ–ª–æ–Ω(-–Ω–∞) —Å–∏–ª", "–ë–æ–ª–µ–µ-–º–µ–Ω–µ–µ, –Ω–æ —Ö–æ—á–µ—Ç—Å—è —Å–ø–∞—Ç—å –µ—â–µ", "–†–∞–∑–±–∏—Ç—ã–º(-–æ–π), –∫–∞–∫ –±—É–¥—Ç–æ –Ω–µ —Å–ø–∞–ª(–∞)"] },
        { key: 'water_balance', text: "–°–∫–æ–ª—å–∫–æ —á–∏—Å—Ç–æ–π –≤–æ–¥—ã —Ç—ã –≤—ã–ø–∏–≤–∞–µ—à—å –≤ –¥–µ–Ω—å?", answers: ["–ú–Ω–æ–≥–æ, 1.5-2 –ª–∏—Ç—Ä–∞", "–ü–∞—Ä—É —Å—Ç–∞–∫–∞–Ω–æ–≤, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —á–∞–π/–∫–æ—Ñ–µ", "–û—á–µ–Ω—å –º–∞–ª–æ, –ø–æ—á—Ç–∏ –Ω–µ –ø—å—é"] },
        { key: 'metabolism_feel', text: "–ö–∞–∫ –±—ã —Ç—ã –æ–ø–∏—Å–∞–ª(–∞) —Å–≤–æ–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º?", answers: ["–ë—ã—Å—Ç—Ä—ã–π, –º–æ–≥—É –µ—Å—Ç—å –∏ –Ω–µ —Ç–æ–ª—Å—Ç–µ—Ç—å", "–°—Ä–µ–¥–Ω–∏–π, –≤–µ—Å –¥–µ—Ä–∂–∏—Ç—Å—è, –µ—Å–ª–∏ —Å–ª–µ–¥–∏—Ç—å", "–ú–µ–¥–ª–µ–Ω–Ω—ã–π, –ø–æ–ø—Ä–∞–≤–ª—è—é—Å—å –æ—Ç –≤—Å–µ–≥–æ"] },
        { key: 'stress_reaction', text: "–ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏?", answers: ["–°—Ç–∞—Ä–∞—é—Å—å –æ—Ç–≤–ª–µ—á—å—Å—è (–ø—Ä–æ–≥—É–ª–∫–∞, —Ö–æ–±–±–∏)", "–¢—è–Ω–µ—Ç –Ω–∞ —Å–ª–∞–¥–∫–æ–µ –∏–ª–∏ –≤—Ä–µ–¥–Ω—É—é –µ–¥—É", "–¢–µ—Ä—è—é –∞–ø–ø–µ—Ç–∏—Ç", "–†–∞–∑–¥—Ä–∞–∂–∞—é—Å—å –∏ —Å—Ä—ã–≤–∞—é—Å—å –Ω–∞ –±–ª–∏–∑–∫–∏—Ö"] },
        { key: 'readiness', text: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã –≥–æ—Ç–æ–≤(–∞) –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?", answers: ["–ù–∞ 100%, –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É –∂–¥–∞—Ç—å!", "–ì–æ—Ç–æ–≤(–∞), –Ω–æ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞", "–°–æ–º–Ω–µ–≤–∞—é—Å—å, —á—Ç–æ —É –º–µ–Ω—è –ø–æ–ª—É—á–∏—Ç—Å—è"] }
    ];

    function showScreen(screenId) {
        window.scrollTo({ top: 0, behavior: 'smooth' });
        Object.values(screens).forEach(screen => screen.classList.add('hidden'));
        screens[screenId].classList.remove('hidden');
    }

    function showQuestion() {
        // ... (–∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
        const question = questions[currentQuestionIndex];
        questionTextEl.innerText = question.text;
        answersContainerEl.innerHTML = '';
        question.answers.forEach(answerText => {
            const button = document.createElement('button');
            button.className = 'answer-btn';
            button.innerText = answerText;
            button.addEventListener('click', () => selectAnswer(question.key, answerText));
            answersContainerEl.appendChild(button);
        });
        progressInnerEl.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
    }

    function selectAnswer(key, value) {
        // ... (–∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
        userData[key] = value;
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showLoadingScreen();
        }
    }

    function showLoadingScreen() {
        // ... (–∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
        showScreen('loading');
        const phrases = ["–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∏—â–µ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏...", "–û—Ü–µ–Ω–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...", "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–∫—Ç–æ—Ä—ã —Å—Ç—Ä–µ—Å—Å–∞...", "–°–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π Wellness-–ø—Ä–æ—Ñ–∏–ª—å..."];
        let phraseIndex = 0;
        if (loadingTextEl) loadingTextEl.innerText = phrases[phraseIndex];
        const interval = setInterval(() => {
            phraseIndex++;
            if (phraseIndex < phrases.length) {
                if (loadingTextEl) loadingTextEl.innerText = phrases[phraseIndex];
            } else {
                clearInterval(interval);
                generateReport();
            }
        }, 1200);
    }
    
    function generateReport() {
        // ... (–∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
        const nutritionText = document.getElementById('nutrition-text');
        const activityText = document.getElementById('activity-text');
        const stressText = document.getElementById('stress-text');
        const nutritionRec = document.getElementById('nutrition-rec');
        const activityRec = document.getElementById('activity-rec');
        if (userData.eating_trigger === "–°—Ç—Ä–µ—Å—Å –∏–ª–∏ —Å–∫—É–∫–∞" || userData.stress_reaction === "–¢—è–Ω–µ—Ç –Ω–∞ —Å–ª–∞–¥–∫–æ–µ –∏–ª–∏ –≤—Ä–µ–¥–Ω—É—é –µ–¥—É") {
            nutritionText.innerHTML = "–¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π –±–∞—Ä—å–µ—Ä ‚Äî <strong>—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ.</strong> –¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –µ–¥—É –Ω–µ –¥–ª—è —É—Ç–æ–ª–µ–Ω–∏—è –≥–æ–ª–æ–¥–∞, –∞ –¥–ª—è –±–æ—Ä—å–±—ã —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –∏ —Å–∫—É–∫–æ–π. –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –∑–æ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã.";
            nutritionRec.innerText = "–ù–∞—É—á–∏—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –≥–æ–ª–æ–¥. –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —á—Ç–æ-—Ç–æ —Å—ä–µ—Å—Ç—å, —Å–ø—Ä–æ—Å–∏ —Å–µ–±—è: '–Ø –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≥–æ–ª–æ–¥–µ–Ω(–Ω–∞)?'. –ò—â–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –±–æ—Ä—å–±—ã —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º.";
        } else if (userData.metabolism_feel === "–ú–µ–¥–ª–µ–Ω–Ω—ã–π, –ø–æ–ø—Ä–∞–≤–ª—è—é—Å—å –æ—Ç –≤—Å–µ–≥–æ") {
            nutritionText.innerHTML = "–ü–æ—Ö–æ–∂–µ, —Ç–≤–æ–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º –∑–∞–º–µ–¥–ª–µ–Ω. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º –¥–≤–∏–∂–µ–Ω–∏—è –∏–ª–∏ –Ω–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º. <strong>–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å ‚Äî –µ–≥–æ –º–æ–∂–Ω–æ '—Ä–∞–∑–æ–≥–Ω–∞—Ç—å'.</strong>";
            nutritionRec.innerText = "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –±–µ–ª–∫–æ–≤–æ–π –ø–∏—â–µ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤–æ–¥—ã. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤.";
        } else {
            nutritionText.innerHTML = "–¢–≤–æ–∏ –ø–∏—â–µ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –≤ —Ü–µ–ª–æ–º –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ. –ì–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –∏ –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å —Å—Ä—ã–≤–æ–≤ –∏–∑-–∑–∞ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤.";
            nutritionRec.innerText = "–ü—Ä–æ–¥–æ–ª–∂–∞–π —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ–º –µ–¥—ã. –î–æ–±–∞–≤—å –≤ —Ä–∞—Ü–∏–æ–Ω –±–æ–ª—å—à–µ –∑–µ–ª–µ–Ω—ã—Ö –æ–≤–æ—â–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è.";
        }
        if (userData.activity_type === "–ú–Ω–µ —Å–ª–æ–∂–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –¥–≤–∏–≥–∞—Ç—å—Å—è") {
            activityText.innerHTML = "–¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å ‚Äî –Ω–∞—á–∞—Ç—å –¥–≤–∏–≥–∞—Ç—å—Å—è. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏–ª—å–Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º –∏ —Å–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏. <strong>–î–∞–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–¥—É—Ç –±—ã—Å—Ç—Ä—ã–π —ç—Ñ—Ñ–µ–∫—Ç.</strong>";
            activityRec.innerText = "–ù–µ –¥—É–º–∞–π –æ '—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö'. –ù–∞—á–Ω–∏ —Å —Ü–µ–ª–∏ 20-–º–∏–Ω—É—Ç–Ω–æ–π –ø—Ä–æ–≥—É–ª–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–æ–¥ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É –∏–ª–∏ –ø–æ–¥–∫–∞—Å—Ç. –≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –≤—Å—ë.";
        } else {
            activityText.innerHTML = "–£ —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫–æ–π —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∏ —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ! –ì–ª–∞–≤–Ω–æ–µ ‚Äî –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—É—é –ø—Ä–∏–≤—ã—á–∫—É.";
            activityRec.innerText = "–í—ã–±–µ—Ä–∏ 2-3 –¥–Ω—è –≤ –Ω–µ–¥–µ–ª—é –∏ –≤–Ω–µ—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Å–≤–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∫–∞–∫ –≤–∞–∂–Ω—É—é –≤—Å—Ç—Ä–µ—á—É. –†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏.";
        }
        if (userData.sleep_quality === "–†–∞–∑–±–∏—Ç—ã–º(-–æ–π), –∫–∞–∫ –±—É–¥—Ç–æ –Ω–µ —Å–ø–∞–ª(–∞)") {
            stressText.innerHTML = "–¢–≤–æ–π —Å–æ–Ω ‚Äî '–∫—Ä–∞—Å–Ω–∞—è –∑–æ–Ω–∞'. –ü–ª–æ—Ö–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ—á—å—é –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ –≥–æ—Ä–º–æ–Ω—ã –≥–æ–ª–æ–¥–∞ (–≥—Ä–µ–ª–∏–Ω) –∏ —Å—Ç—Ä–µ—Å—Å–∞ (–∫–æ—Ä—Ç–∏–∑–æ–ª), <strong>–∑–∞—Å—Ç–∞–≤–ª—è—è —Ç–µ–ª–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –∂–∏—Ä.</strong>";
        } else if (userData.water_balance === "–û—á–µ–Ω—å –º–∞–ª–æ, –ø–æ—á—Ç–∏ –Ω–µ –ø—å—é") {
            stressText.innerHTML = "–û–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–µ ‚Äî —Å–∫—Ä—ã—Ç—ã–π –≤—Ä–∞–≥. –¢–µ–ª–æ —á–∞—Å—Ç–æ –ø—É—Ç–∞–µ—Ç –∂–∞–∂–¥—É —Å –≥–æ–ª–æ–¥–æ–º, –∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≤–æ–¥—ã –∑–∞–º–µ–¥–ª—è–µ—Ç –≤—Å–µ –æ–±–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ. <strong>–≠—Ç–æ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å!</strong>";
        } else {
            stressText.innerHTML = "–¢–≤–æ–µ —Ç–µ–ª–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–æ —Ç–≤–æ–π –º–æ—â–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏—è.";
        }
        showScreen('report');
    }

    // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ---
    if (startBtn) {
        startBtn.addEventListener('click', () => {
            showScreen('quiz');
            showQuestion();
        });
    }

    if (buyBtn) {
        buyBtn.addEventListener('click', () => {
            const finalLink = `${PARTNER_LINK}?sub1=tg_wellness_quiz`;
            tg.openLink(finalLink);
        });
    }

    // ================== –ù–û–í–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö ==================
    if (shareBtn) {
        shareBtn.addEventListener('click', () => {
            // !!! –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ó–ê–ú–ï–ù–ò–¢–ï 'YourBotUsername' –ù–ê –Æ–ó–ï–†–ù–ï–ô–ú –í–ê–®–ï–ì–û –ë–û–¢–ê !!!
            const botUsername = 'YourBotUsername'; 

            // –≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ–≥–¥–∞ –æ–Ω –≤—ã–±–µ—Ä–µ—Ç, –∫–æ–º—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
            const queryText = `–ü—Ä–∏–≤–µ—Ç! üëã –ü—Ä–æ—à–ª–∞ —Ç—É—Ç –∫—Ä—É—Ç–æ–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ –¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∏—Ç–∞–Ω–∏—é. –û—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π —Ç–æ–∂–µ! üëâ @${botUsername}`;

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ –∏–Ω–ª–∞–π–Ω-—Ä–µ–∂–∏–º —Å –≥–æ—Ç–æ–≤—ã–º —Ç–µ–∫—Å—Ç–æ–º
            // –ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä '' –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –∏—â–µ–º –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö
            // –í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä - —ç—Ç–æ –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            tg.switchInlineQuery(queryText, '');
        });
    }
    // ========================================================

    // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
    showScreen('start');
});
